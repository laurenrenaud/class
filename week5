import csv

# open misspellings document
csvfile = open('common_misspellings.csv', encoding='ISO-8859-1')
misspellings = csv.reader(csvfile, delimiter=',')


def main():

    abstracts = open('downloadCitations.txt', 'r')
    count = 1

    # create dictionary for misspellings
    corrections = {}
    for row in misspellings:
        col1 = row[0]
        col2 = row[1]
        corrections[col1] = col2

    # open deletion file & read first line
    deletion = open('noise_words.txt', 'r')

    # read in replacement file
    line = deletion.readline()
    delete_list = []
    while line != '':
        line = deletion.readline()
        line = line.rstrip('\n')
        delete_list.append(line)

    # create holder for keywords
    keywords=[]
    
    # do corrections then replacements
    for i in abstracts:
        abs_words = i.split()
        for word in abs_words:
            for key in corrections:
                word = word.replace(key, corrections[key])
            if word not in delete_list:
                 keywords.append(word)
        # print(keywords)
    
    # build HTML list
    output.append=[]
    for word in keywords:
        output.append('''<li><a href="''', word, '''</a>''')
    html_list = ouput.append
    
    # build HTML document
    html_begin = """
    <!DOCTYPE html>
    <html>
    <body>
    <h1>Welcome to the ACM Library</h1>
    <h3>A research, discovery and networking platform</h3>
    <h2>Browse our library by <a href="#author">author</a> or <a href="#keyword">keyword</a>.
    <h3 id="keyword"><h3>Keywords</h3></a>
    <ul>
    """
    
    html_end = """
    </ul>
    </body>
    </html>"""
    
    # concatenate HTML
    html_str = html_begin + html_list + html_end
    
    # write out HTML
    Html_file= open("index.html","w")
    Html_file.write(html_str)
    Html_file.close()

    abstracts.close()

main()



